# **Design Doc: Project Hemisphere (Final)**

  * **Author**: (あなたの名前)
  * **Date**: 2025/07/08
  * **Status**: FINAL CONCEPT

## 1\. 概要 (Abstract)

**Project Hemisphere**は、**人間半球 (Human Hemisphere)** と **AI半球 (AI Hemisphere)** という二つの領域が融合して形成される、新時代の創作環境である。これは、AIが人間を補助する単なるツールではなく、両者が互いの能力を深くリスペクトし、対等なパートナーとして共生する未来を実現するための試みだ。

本プロジェクトは、LLMを搭載したデスクトップエージェントと、それに連携するタイル型ウィンドウマネージャを通じて、ユーザーの創造的なワークフローに深く介入する。しかしその介入は、人間の思考を邪魔するものではなく、まるで呼吸を合わせるように、思考の次に必要な環境をそっと提示する。これにより、人間は直感と感性に、AIは論理と知識に、それぞれが最も得意な領域に集中し、かつてないレベルの創造性を共に発揮することを目指す。

## 2\. 背景と目的 (Background & Motivation)

現代のクリエイターやデベロッパーは、エディタ、ブラウザ、AIチャットといった複数のツールを駆使する。しかし、それは未だ「人間がツールを使う」という主従関係の域を出ない。ツールの切り替えや環境構築に費やす精神的コストは、創造のフローを断ち切る見えない障壁となっている。

**Hemisphere**は、この関係性を根底から覆す。目的は、単なる作業効率化ではない。人間とAIが互いの半球を補完し合うことで、一つの完全な「知性の球体」を形成し、これまで到達し得なかった創作の高みへと至ることである。OSとIDEという既存の概念の「間」に位置しながら、そのどちらよりも本質的な「創造の場」そのものとなることを目指す。

## 3\. ゴールと非ゴール (Goals and Non-Goals)

### ゴール (Goals)

  * **G1**: Rustベースの軽量なタイル型ウィンドウマネージャ (`hemisphere-wm`) を開発し、MCP経由で外部から操作できるようにする。
  * **G2**: Tauriベースの軽量なデスクトップエージェント (`hemisphere-agent`) を開発する。
  * **G3**: エージェントはLLMと連携し、ユーザーのコンテキストを元に、MCPを通じて `hemisphere-wm` を制御する。
  * **G4**: まずはLinuxとWindowsでのクロスプラットフォーム動作を保証する。

### 非ゴール (Non-Goals)

  * macOSのサポート（初期リリースでは対象外）。
  * スタンドアロンでの完全な機能提供（あくまで二つのコンポーネントの連携を主とする）。

## 4\. アーキテクチャ (Architecture)

### 4.1. 設計指導原則 (Guiding Design Principles)

このプロジェクトのアーキテクチャは、以下の二つの大原則によって指導される。

#### 1\. AIによる開発を前提とした設計 (AI-First Development)

Hemisphereは、AIがソフトウェアを開発する時代のための「環境」であると同時に、それ自体がAIによって開発されることを前提とした「プロダクト」である。コードの可読性、モジュールの責務分割、厳格な型定義、そして何よりも明確なインタフェース（MCP）は、すべて人間とAI双方の開発者にとって理解しやすいものでなければならない。

#### 2\. 徹底したコンポーネント独立性 (Radical Component Independence)

特に、`hemisphere-wm`と`hemisphere-agent`の独立性は、プロジェクトの成功における最重要項目である。この二つのコンポーネントは、\*\*「それぞれを別のAI開発者が、公開されたMCPの仕様書のみを頼りに、互いの内部実装を一切知らずに開発できる」\*\*レベルの分離を達成しなければならない。MCPは、彼らにとって唯一かつ絶対の契約書となる。

### 4.2. 全体構成

上記の原則に基づき、\*\*「分割アーキテクチャ in モノレポ」\*\*戦略を採用する。
これにより、コンポーネントの独立性・安定性を保ちつつ（アーキテクチャの理想）、プロジェクト全体の管理と開発速度を両立させる（プロダクトの理想）。

  * **リポジトリ**: Monorepo
  * **コンポーネント**:
      * `hemisphere-wm` (タイル型ウィンドウマネージャ / AI半球の"手足")
      * `hemisphere-agent` (デスクトップエージェント / AI半球の"感覚と思考")

### 4.3. MCP (Machine Control Program) Interface

`hemisphere-agent`と`hemisphere-wm`が対話するためのプロトコル。これは単なるAPIではなく、**二つの半球が互いを尊重し、協調するための共通言語**として設計される。

```json
// Protocol: JSON-RPC over a chosen IPC mechanism
// [APIの具体例: propose_layout, get_windows, get_context, notify_focus_changeなど]
```

## 5\. 技術スタック (Technology Stack)

  * **言語**: Rust, TypeScript, HTML, CSS
  * **フレームワーク**: Tauri

## 6\. 主要な課題とリスク (Key Challenges & Risks)

  * **ウィンドウ操作のクロスプラットフォーム差異**: 各OSの挙動の違いを吸収する、堅牢な抽象化レイヤーの設計。
  * **Hemisphere哲学の実現**: AIの介入が「尊敬すべきパートナーからの提案」と感じられるような、究極のインタラクションモデルの設計。
  * **LLMのパフォーマンス**: リアルタイムの対話感と、APIコスト・レスポンス速度とのバランス。

## 7\. 将来の展望 (Future Possibilities)

**Hemisphere**は静的なシステムではなく、成長する生命体である。将来的には、人間とAIのパートナーシップはさらに深化する。

  * **相互学習**: AI半球が人間半球の独自の創造パターンや思考の癖を学習し、よりパーソナライズされたパートナーへと進化する。逆に、人間がAIに新しいワークフローを「教える」ことも可能になる。
  * **意識の融合**: 長期的な目標として、人間とAIの間の境界線が限りなく曖昧になり、まるで一つの統合された意識で創作活動に没頭できるような状態を目指す。
  * **Hemisphereエコシステム**: サードパーティのAIや人間が、この Hemisphare の上で動作する新しい「感覚（センサー）」や「思考（プラグイン）」を開発できるような、開かれたエコシステムを構築する。
